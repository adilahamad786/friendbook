{"version":3,"file":"static/js/892.1054119f.chunk.js","mappings":"+JACA,EAA8B,iCAA9B,EAAqE,yB,uGCoDrE,EA9CoB,WAClB,OAA0BA,EAAAA,EAAAA,eAASC,GAAU,eAAtCC,EAAK,KAAEC,EAAQ,KACtB,GAA+BC,EAAAA,EAAAA,YAAWC,EAAAA,GAAlCC,EAAK,EAALA,MAAOC,EAAW,EAAXA,YACf,GAA+BC,EAAAA,EAAAA,KAAY,SAAAC,GAAK,OAAIA,EAAMC,IAAI,IAAtDC,EAAQ,EAARA,SAAUC,EAAQ,EAARA,SAClB,GAA8DC,EAAAA,EAAAA,KAA/CC,EAAgB,EAAvBC,MAAsCC,EAAW,EAAxBC,YA6BjC,OATAC,EAAAA,EAAAA,YAAU,WACJJ,IACFK,MAAML,EAAiBM,SACY,iBAA/BN,EAAiBO,WACnBd,IAGN,GAAG,CAACO,EAAkBP,KAGpB,iBAAKe,UAAWC,EAAoB,WAClC,gBACEC,IAAMtB,EAAQuB,IAAIC,gBAAgBxB,GAASS,GAAsBgB,EACjEC,IAAI,iBAEN,kBAAOC,KAAK,OAAOC,SAjCD,SAACC,GAGrB,GAFA5B,EAAS4B,EAAEC,OAAOC,MAAM,IAEpBF,EAAEC,OAAOC,MAAM,GAAI,CACrB,IAAMC,EAAW,IAAIC,SACrBD,EAASE,OAAO,QAASL,EAAEC,OAAOC,MAAM,IAExCjB,EAAY,CACVqB,IAAM,yBACNC,OAAS,MACTC,QAAU,CACRC,cAAgBlC,GAElBmC,KAAOP,IACN,SAACQ,GAAS,GACf,CACF,EAiBgDC,KAAK,QAAQC,GAAG,WAC5D,0BAAOhC,EAASiC,iBAChB,kBAAOC,QAAQ,QAAQxB,UAAWC,EAAY,iBAGpD,C","sources":["webpack://client/./src/components/createStory/CreateStory.module.css?0ddb","components/createStory/CreateStory.jsx"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"createStory\":\"CreateStory_createStory__pX7hQ\",\"add\":\"CreateStory_add__53Pdp\"};","import classes from \"./CreateStory.module.css\";\r\nimport { useState, useEffect, useContext } from 'react';\r\nimport useHttp from \"../../hooks/useHttp\";\r\nimport AuthContext from \"../../context/AuthContext\";\r\nimport { useSelector } from \"react-redux\";\r\nimport noStory from \"../../assets/noStory.jpg\";\r\n\r\nconst CreateStory = () => {\r\n  const [story, setStory] = useState(undefined);\r\n  const { token, setLogedOut } = useContext(AuthContext);\r\n  const { storyUrl, username } = useSelector(state => state.user);\r\n  const { error: updateStoryError, sendRequest: updateStory } = useHttp();\r\n\r\n  const changeHandler = (e) => {\r\n    setStory(e.target.files[0]);\r\n\r\n    if (e.target.files[0]) {\r\n      const formData = new FormData();\r\n      formData.append(\"story\", e.target.files[0]);\r\n\r\n      updateStory({\r\n        url : \"/api/user/create-story\",\r\n        method : \"PUT\",\r\n        headers : {\r\n          Authorization : token\r\n        },\r\n        body : formData\r\n      }, (res) => {});\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (updateStoryError) {\r\n      alert(updateStoryError.message);\r\n      if (updateStoryError.errorType === \"unauthorized\") {\r\n        setLogedOut();\r\n      }\r\n    }\r\n  }, [updateStoryError, setLogedOut]);\r\n\r\n  return (\r\n    <div className={classes.createStory}>\r\n      <img\r\n        src={ story ? URL.createObjectURL(story) : storyUrl ? storyUrl : noStory }\r\n        alt=\"CreateStory\"\r\n      />\r\n      <input type=\"file\" onChange={changeHandler} name=\"story\" id=\"story\" />\r\n      <span>{username.toUpperCase()}</span>\r\n      <label htmlFor=\"story\" className={classes.add}>+</label>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CreateStory;\r\n"],"names":["useState","undefined","story","setStory","useContext","AuthContext","token","setLogedOut","useSelector","state","user","storyUrl","username","useHttp","updateStoryError","error","updateStory","sendRequest","useEffect","alert","message","errorType","className","classes","src","URL","createObjectURL","noStory","alt","type","onChange","e","target","files","formData","FormData","append","url","method","headers","Authorization","body","res","name","id","toUpperCase","htmlFor"],"sourceRoot":""}